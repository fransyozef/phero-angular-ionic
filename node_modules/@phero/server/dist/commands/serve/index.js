"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const dev_1 = require("@phero/dev");
const DevServer_1 = __importDefault(require("./DevServer"));
function serve(command) {
    if (command.verbose) {
        const eventUrl = `http://localhost:${command.port}`;
        (0, dev_1.addDevEventListener)(eventUrl, (event) => {
            console.log(event);
        }, () => {
            console.log("Listener to phero-server process connected");
        }, (error) => {
            console.error(`Could not connect to event emitter at ${eventUrl}`);
            console.error(error);
        });
    }
    new DevServer_1.default(command, process.cwd()).start();
}
exports.default = serve;
